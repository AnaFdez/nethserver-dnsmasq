{
    use esmith::HostsDB;
    my $hdb = esmith::HostsDB->open_ro();

    foreach $host ($hdb->hosts)
    {
        my $MACAddress = $host->prop('MACAddress') || '';
        next unless ( ($MACAddress eq '') ); # skip all dhcp static entries
        
	next unless ($host->prop('HostType') ne 'Self'); # skip all local alias

        my $InternalIP = $host->prop('InternalIP') || '';
        my $ExternalIP = $host->prop('ExternalIP') || '';
        next unless (($InternalIP ne '') || ($ExternalIP  ne '')); # skip all entries without and IP
        
	my $Comment = $host->prop('Comment') || "";
        $OUT .= "# $Comment\n" unless ($Comment eq "");
        $OUT .= "$InternalIP$ExternalIP\t".$host->key."\n"; #one of InternalIP or ExternalIP is surely blank
    }
    undef;      # We need a return value
}
