#!/usr/bin/perl -w

use esmith::Build::CreateLinks  qw(:all);

event_templates('nethserver-dnsmasq-update',
		'/etc/dnsmasq.conf',
		'/etc/dnsmasq.d/dhcp.conf',
		'/etc/dnsmasq.d/dns.conf',
		'/etc/resolv.conf');

event_actions('nethserver-dnsmasq-update',
	      'initialize-default-databases' => '00',
	      'firewall-adjust' => '30',
	      'runlevel-adjust' => '40');

safe_symlink("reload", "root/etc/e-smith/events/$_/services2adjust/dnsmasq") foreach (qw(
    host-create 
    host-delete 
    host-modify 
    nethserver-dnsmasq-update
));

#--------------------------------------------------
# actions for dhcp-reservation validator
#--------------------------------------------------
my $validator = 'dhcp-reservation';
validator_link("ip-not-reserved-local", $validator, "20");
